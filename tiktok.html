<!-- Fayl: fullscreen.html -->
<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>TikTok Fullscreen (Proxy)</title>
  <style>
    html,body{height:100%;margin:0;background:#000;color:#fff;font-family:system-ui;}
    .app{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:12px;}
    .input-row{width:100%;max-width:720px;display:flex;gap:8px;}
    input{flex:1;padding:10px;border-radius:8px;border:none;font-size:16px}
    button{padding:10px 14px;border-radius:8px;border:none;background:#ff0050;color:#fff;font-weight:600}
    iframe{width:100%;max-width:720px;height:calc(100vh - 92px);border:none;margin-top:12px;border-radius:12px;display:block}
  </style>
</head>
<body>
  <div class="app">
    <div class="input-row">
      <input id="url" placeholder="TikTok video URL ni kiriting (masalan https://www.tiktok.com/@user/video/123...)" />
      <button id="open">Ochish</button>
    </div>
    <iframe id="frame" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
  </div>

  <script>
    // o'zgartiring: VPS IP va port
    const PROXY_BASE = "http://38.242.228.144:8082"; // backend manzili (https tavsiya qilinadi)
    const frame = document.getElementById('frame');
    document.getElementById('open').addEventListener('click', () => {
      const u = document.getElementById('url').value.trim();
      if(!u) return alert('TikTok video URL kiriting');
      const src = PROXY_BASE + '/tiktok?url=' + encodeURIComponent(u);
      frame.src = src;
      // make iframe fullscreen-like in mobile
    });

    // optional: auto open from query param ?url=...
    const params = new URLSearchParams(location.search);
    if(params.get('url')) {
      document.getElementById('url').value = params.get('url');
      document.getElementById('open').click();
    }
  </script>
</body>
</html>
